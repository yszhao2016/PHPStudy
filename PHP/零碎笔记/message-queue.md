
消息队列

我们可以把消息队列比作是一个存放消息的容器，当我们需要使用消息的时候可以取出消息供自己使用。
消息队列是分布式系统中重要的组件，使用消息队列主要是为了通过异步处理提高系统性能和削峰、降低系统耦合性。
目前使用较多的消息队列有ActiveMQ，RabbitMQ，Kafka，RocketMQ

Queue 是一种先进先出的数据结构


1.通过异步处理提高系统性能（削峰、减少响应所需时间）; 
  电子商务一些秒杀、促销活动中，
  合理使用消息队列可以有效抵御促销活动刚开始大量订单涌入对系统的冲击

2.降低系统耦合性。
    事件驱动架构类似生产者消费者模式，
    在大型网站中通常用利用消息队列实现事件驱动结构
                                                      |  ---   应用程序B(消息接收者  消费者)        
    应用程序A(消息发送者 生产者)  -----》分布式消息队列 |   ---   应用程序C(消息接收者  消费者) 
                                                      |  ---   应用程序D(消息接收者  消费者) 

3 点对点订阅模式（一个消息只有一个消费者）



应用案例(http://www.php.cn/php-weizijiaocheng-390390.html)
网站用户注册，注册成功后会过一会发送邮件确认或者短息。

用户在支付系统成功结账后，订单系统会通过短信系统向用户推送扣费通知。（流量削峰和流控）

比如实现 点对点消息队列 或者 聊天室 等。


1.异步处理、应用解耦、分布式
场景：主业务对子业务的处理结果并不关心时。
案例：电商系统中订单系统、物流系统、财务系统以及操作日志记录系统之间的关系

2.峰值处理
场景：流量在各个时间点不均衡
案例：秒杀、抢购

3.送达保证
场景：内容需要逐条严格执行，并保证执行成功，执行不成功或者中断时，可以恢复
案例：银行、财务类系统，需提升容灾能力的系统

4.排序保证
场景：消息队列中的内容有严格的顺序。
案例：抢号排队等系统

5.扩展性
场景：采用发布-订阅模式时，添加新的订阅者
案例：注册用户后，发送成功短信的模型中，追加一个发送email的功能


在消息队列介质选择时  redis mysql file 。。。。